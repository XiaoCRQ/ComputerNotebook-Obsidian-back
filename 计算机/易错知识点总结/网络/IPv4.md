# IPv4 简介

- **IPv4（Internet Protocol version 4）** 是互联网协议的第四版，用于在网络中唯一标识设备。
- IPv4 地址是一个 **32 位** 的二进制数，通常以 **点分十进制** 格式表示，例如 `192.168.1.1`。
- IPv4 地址由 **网络部分** 和 **主机部分** 组成，用于区分不同的网络和设备。

## 特点
- 总地址数量：约 **43 亿个**（2³²）。
- 由于地址空间有限，IPv4 地址逐渐被 IPv6 取代，但目前仍在广泛使用。
- 支持子网划分，通过子网掩码灵活分配地址。

---

# IPv4 地址的类型

## 1. 按用途分类
- **单播地址（Unicast）**
  - 用于标识单一设备。
  - 数据包从源地址发送到特定的目标地址。
  - 示例：`192.168.1.10`
- **广播地址（Broadcast）**
  - 用于向同一网络中的所有设备发送数据。
  - 广播地址是子网中主机部分全为 `1` 的地址。
  - 示例：`192.168.1.255`
- **多播地址（Multicast）**
  - 用于向一组设备发送数据。
  - 多播地址范围：`224.0.0.0` 到 `239.255.255.255`。
  - 示例：`224.0.0.1`（所有主机的多播地址）。

## 2. 按地址范围分类
- **公有地址（Public IP）**
  - 全球唯一的地址，用于互联网通信。
  - 需要向 ISP（互联网服务提供商）申请。
- **私有地址（Private IP）**
  - 用于局域网内部通信，不能直接访问互联网。
  - 私有地址范围：
    - A 类：`10.0.0.0` - `10.255.255.255`
    - B 类：`172.16.0.0` - `172.31.255.255`
    - C 类：`192.168.0.0` - `192.168.255.255`

---

# IPv4 子网划分详解

## 1. 子网划分的目的
- 提高 IP 地址的利用率。
- 减少广播域的大小，提高网络性能。
- 实现更灵活的网络设计和管理。

## 2. 子网掩码
- 子网掩码用于区分 IP 地址中的 **网络部分** 和 **主机部分**。
- 表示方式：
  - 点分十进制：如 `255.255.255.0`
  - CIDR 表示法：如 `/24`
- 示例：
  - IP 地址：`192.168.1.10`
  - 子网掩码：`255.255.255.0` 或 `/24`
  - 网络部分：`192.168.1`
  - 主机部分：`.10`

## 3. 子网划分步骤
### 步骤 1：确定需求
- 需要划分的子网数量。
- 每个子网需要容纳的主机数量。

### 步骤 2：计算子网掩码
- 使用公式：
  - 子网数量 = 2ⁿ（n 为借位数）
  - 主机数量 = 2ᵐ - 2（m 为主机位数，减去 2 是因为需要保留网络地址和广播地址）

### 步骤 3：划分子网
- 示例：
  - 原始网络：`192.168.1.0/24`
  - 需求：划分为 4 个子网，每个子网至少容纳 50 台主机。
  - 计算：
    - 子网数量：2² = 4（借 2 位）
    - 新子网掩码：`255.255.255.192` 或 `/26`
    - 每个子网的主机数量：2⁶ - 2 = 62
  - 子网划分结果：
    - 子网 1：`192.168.1.0/26`（可用地址：`192.168.1.1` - `192.168.1.62`）
    - 子网 2：`192.168.1.64/26`（可用地址：`192.168.1.65` - `192.168.1.126`）
    - 子网 3：`192.168.1.128/26`（可用地址：`192.168.1.129` - `192.168.1.190`）
    - 子网 4：`192.168.1.192/26`（可用地址：`192.168.1.193` - `192.168.1.254`）

## 4. 子网划分的优点
- 节省 IP 地址资源。
- 提高网络安全性（隔离广播域）。
- 简化网络管理和故障排查。

---

# 注意事项
- 子网划分时需确保主机数量不超过子网容量。
- 避免地址浪费，合理规划子网掩码。
- 使用 CIDR 表示法时，斜杠后的数字表示网络前缀长度。