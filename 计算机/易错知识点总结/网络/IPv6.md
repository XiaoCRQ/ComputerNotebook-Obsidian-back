# IPv6 简介

- **IPv6（Internet Protocol version 6）** 是互联网协议的第六版，用于替代 IPv4。
- IPv6 地址是一个 **128 位** 的二进制数，通常以 **冒号分隔的十六进制** 格式表示，例如 `2001:0db8:85a3:0000:0000:8a2e:0370:7334`。
- IPv6 提供了约 **3.4×10³⁸** 个唯一地址，解决了 IPv4 地址枯竭的问题。

## 特点
- 更大的地址空间：2¹²⁸ 个地址。
- 改进了路由效率和自动配置功能。
- 内置安全性（支持 IPsec）。
- 简化了头部结构，提升了性能。

---

# IPv6 地址的表示方法

- **标准格式**：完整的 IPv6 地址由 8 组 4 位十六进制数组成，每组之间用冒号分隔。
  - 示例：`2001:0db8:85a3:0000:0000:8a2e:0370:7334`
- **压缩格式**：
  - 连续的零可以用双冒号 `::` 替代，但只能出现一次。
  - 示例：`2001:0db8::8a2e:0370:7334`

---

# IPv6 地址的类型

## 1. 单播地址（Unicast）
- 用于标识单一设备。
- 数据包从源地址发送到特定的目标地址。
- 类型：
  - **全局单播地址（Global Unicast）**：
    - 类似于 IPv4 的公有地址，全球唯一。
    - 范围：`2000::/3`
  - **链路本地地址（Link-Local）**：
    - 仅在本地链路中有效，用于邻居发现和无路由器网络通信。
    - 范围：`FE80::/10`
  - **唯一本地地址（Unique Local）**：
    - 类似于 IPv4 的私有地址，仅在组织内部使用。
    - 范围：`FC00::/7`

## 2. 组播地址（Multicast）
- 用于向一组设备发送数据。
- 范围：`FF00::/8`
- 示例：
  - `FF02::1`：所有节点的组播地址。
  - `FF02::2`：所有路由器的组播地址。

## 3. 任播地址（Anycast）
- 用于标识一组设备中的任意一个设备。
- 数据包会被发送到最近的一个设备（根据路由距离）。
- 任播地址与单播地址格式相同，但分配给多个设备。

## 4. 特殊地址
- **未指定地址（Unspecified Address）**：
  - 表示没有地址，通常用于启动时。
  - 地址：`::`
- **回环地址（Loopback Address）**：
  - 类似于 IPv4 的 `127.0.0.1`。
  - 地址：`::1`

---

# IPv6 地址分配

## 1. 全局单播地址分配
- 全局单播地址由以下部分组成：
  - **前缀（Prefix）**：通常为 `/48` 或 `/64`，由 ISP 分配。
  - **子网 ID（Subnet ID）**：用于划分内部子网。
  - **接口 ID（Interface ID）**：用于标识设备，通常为 64 位。
- 示例：
  - 地址：`2001:db8:abcd:1234::1/64`
  - 前缀：`2001:db8:abcd:1234::/64`
  - 接口 ID：`::1`

## 2. 链路本地地址分配
- 每个 IPv6 设备都会自动生成一个链路本地地址。
- 地址范围：`FE80::/10`
- 示例：
  - 自动生成的链路本地地址：`FE80::1`

## 3. 唯一本地地址分配
- 类似于 IPv4 的私有地址，仅在组织内部使用。
- 地址范围：`FC00::/7`
- 示例：
  - 唯一本地地址：`FD00::1`

---

# IPv6 子网划分

## 1. 子网划分的目的
- 提高地址利用率。
- 实现更灵活的网络设计和管理。

## 2. 子网划分方法
- IPv6 使用固定长度的子网掩码（通常是 `/64`），因为接口 ID 默认占用 64 位。
- 示例：
  - 原始网络：`2001:db8:abcd::/48`
  - 划分为 16 个子网：
    - 子网 1：`2001:db8:abcd:0000::/64`
    - 子网 2：`2001:db8:abcd:0001::/64`
    - ...
    - 子网 16：`2001:db8:abcd:000F::/64`

## 3. 子网划分的优点
- 简化了地址分配和管理。
- 支持大规模网络部署。
- 减少了广播域的影响。

---

# IPv6 的优势

1. **更大的地址空间**：解决了 IPv4 地址枯竭的问题。
2. **自动配置**：支持无状态地址自动配置（SLAAC），简化了设备接入网络的过程。
3. **改进的安全性**：内置对 IPsec 的支持。
4. **更高的效率**：简化的头部结构减少了路由器处理的开销。

---

# 注意事项

- **双栈技术**：IPv6 和 IPv4 可以同时运行，确保过渡期的兼容性。
- **地址规划**：合理规划子网前缀，避免地址浪费。
- **安全性**：尽管 IPv6 内置了 IPsec，仍需注意网络安全策略。
